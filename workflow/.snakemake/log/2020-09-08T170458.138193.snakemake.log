Building DAG of jobs...
Job counts:
	count	jobs
	1	all
	1	index_bam
	1	map_reads
	1	mark_duplicates
	1	recalibrate_base_qualities
	1	sort_bam
	1	trim_reads_pe
	7

[Tue Sep  8 17:04:58 2020]
rule trim_reads_pe:
    input: /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/samples/BRCA_NA12892_R1.fastq.gz, /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/samples/BRCA_NA12892_R2.fastq.gz
    output: results/trimmed/BRCA_NA12892.1.fastq.gz, results/trimmed/BRCA_NA12892.2.fastq.gz, results/trimmed/BRCA_NA12892.1.unpaired.fastq.gz, results/trimmed/BRCA_NA12892.2.unpaired.fastq.gz
    log: logs/trimmomatic/BRCA_NA12892.log
    jobid: 6
    wildcards: sample=BRCA_NA12892

trimmomatic PE -threads 1 -phred33         /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/samples/BRCA_NA12892_R1.fastq.gz /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/samples/BRCA_NA12892_R2.fastq.gz         results/trimmed/BRCA_NA12892.1.fastq.gz results/trimmed/BRCA_NA12892.1.unpaired.fastq.gz         results/trimmed/BRCA_NA12892.2.fastq.gz results/trimmed/BRCA_NA12892.2.unpaired.fastq.gz         ILLUMINACLIP:/tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/adapters/TruSeq3-PE.fa:2:30:10 'LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36'         2> logs/trimmomatic/BRCA_NA12892.log

[Tue Sep  8 17:04:58 2020]
rule map_reads:
    input: /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/references/hg19/ucsc.hg19.fasta, results/trimmed/BRCA_NA12892.1.fastq.gz, results/trimmed/BRCA_NA12892.2.fastq.gz
    output: results/mapped/BRCA_NA12892.bam
    log: logs/bwa_mem/BRCA_NA12892.log
    jobid: 5
    wildcards: sample=BRCA_NA12892

(bwa mem -r '@RG	ID:inco	SM:BRCA_NA12892	PL:illumina' -t 1 /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/references/hg19/ucsc.hg19.fasta results/trimmed/BRCA_NA12892.1.fastq.gz results/trimmed/BRCA_NA12892.2.fastq.gz | samtools view -Sb - > results/mapped/BRCA_NA12892.bam) 2> logs/bwa_mem/BRCA_NA12892.log

[Tue Sep  8 17:04:58 2020]
rule sort_bam:
    input: results/mapped/BRCA_NA12892.bam
    output: results/mapped/BRCA_NA12892.sorted.bam
    log: logs/samtools/sort/BRCA_NA12892.log
    jobid: 4
    wildcards: sample=BRCA_NA12892

samtools sort -T results/mapped/BRCA_NA12892 -O bam results/mapped/BRCA_NA12892.bam > results/mapped/BRCA_NA12892.sorted.bam 2> logs/samtools/sort/BRCA_NA12892.log

[Tue Sep  8 17:04:58 2020]
rule mark_duplicates:
    input: results/mapped/BRCA_NA12892.sorted.bam
    output: results/dedup/BRCA_NA12892.dedup.bam, results/dedup/BRCA_NA12892.sortsam.bam, results/dedup/BRCA_NA12892.markdup.metrics.txt
    log: logs/picard/dedup/BRCA_NA12892.log
    jobid: 3
    wildcards: sample=BRCA_NA12892

gatk MarkDuplicates -I results/mapped/BRCA_NA12892.sorted.bam -O results/dedup/BRCA_NA12892.dedup.bam -M results/dedup/BRCA_NA12892.markdup.metrics.txt 'REMOVE_DUPLICATES=true' | gatk SortSam -I results/dedup/BRCA_NA12892.dedup.bam -O results/dedup/BRCA_NA12892.sortsam.bam -SO coordinate 2> logs/picard/dedup/BRCA_NA12892.log

[Tue Sep  8 17:04:58 2020]
rule recalibrate_base_qualities:
    input: results/dedup/BRCA_NA12892.sortsam.bam, /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/resources/references/hg19/ucsc.hg19.fasta, /tier4/DSC/GATK/jgjeong/standardDB/vcfDB/dbsnp_138.hg19.vcf
    output: results/recal/BRCA_NA12892.bam, results/recal/BRCA_NA12892.recal.table
    log: logs/gatk/bqsr/BRCA_NA12892.log
    jobid: 2
    wildcards: sample=BRCA_NA12892

RuleException in line 90 of /tier4/DSC/GATK/ehlim/gatk_germline_pipeline/workflow/rules/mapping.smk:
NameError: The name 'ref' is unknown in this context. Please make sure that you defined that variable. Also note that braces not used for variable access have to be escaped by repeating them, i.e. {{print $1}}
